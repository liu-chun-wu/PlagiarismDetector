使用Sobel算子 (Gonzalez & Woods, 2008) 計算圖像水平和垂直方向的梯度，進而計算每個像素的梯度方向。求導操作可以捕獲輪廓、人影和紋理信息，並減弱光照影響。像素(x, y)的水平和垂直梯度為：

Gx(x, y) = G(x+1, y) - G(x-1, y)    
Gy(x, y) = G(x, y+1) - G(x, y-1)   

像素(x, y)的梯度幅值和方向計算如下：

∇G(x, y) = √[Gx(x, y)² + Gy(x, y)²]  
θ(x, y) = arctan[Gy(x, y) / Gx(x, y)] 
