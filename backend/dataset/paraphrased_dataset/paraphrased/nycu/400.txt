演算法計算卡通圖案每個輪廓與食物清單中每種食物的比對結果，儲存為𝑅𝑆𝑓𝐼𝑑𝑥 𝑐𝐼𝑑𝑥，記錄各擺盤結果與目標輪廓的顏色差異𝐸𝑐𝑜𝑙𝑜𝑟、形狀差異𝐸𝑖𝑐𝑝、面積差異𝐸𝑎𝑟𝑒𝑎。


考慮食物是否可疊放，決定擺盤方式，以呈現最佳視覺效果。由於鮮豔色彩和多樣食物能吸引兒童，除了個別輪廓的差異值，也需考量整體擺盤的食物種類數量。


篩選機制如下：


(1) 首先以𝐸𝑎𝑟𝑒𝑎和𝐸𝑖𝑐𝑝篩選不佳結果。(若某輪廓所有結果皆被篩選掉，則選擇最佳結果)


(2) 優先選擇單一食物匹配輪廓的結果，並刪除使用多個食物的結果。


(3) 為縮短計算時間，限制每個輪廓的擺盤結果最多4個。


(4) 使用深度優先搜尋法，遍歷所有可能的擺盤結果組合(時間複雜度O(4𝑆𝑖𝑧𝑒𝑞))，並計算整體擺盤的吸引力，考量差異值和食物多樣性，公式如下：


𝑡𝑎𝑠𝑡𝑦 = (∑∑𝑅𝑆𝑛 𝑚[𝑤𝑐∗(1 −𝐸𝑟𝑟𝑜𝑟𝑐𝑜𝑙𝑜𝑟) + 𝑤𝑖∗(1 −𝐸𝑟𝑟𝑜𝑟𝑖𝑐𝑝) + 𝑤𝑎∗(1 −𝐸𝑟𝑟𝑜𝑟𝑎𝑟𝑒𝑎)]) ∗ (𝐶𝑜𝑢𝑛𝑡𝑓 / 𝐶𝑜𝑢𝑛𝑡𝑎𝑙𝑙)



其中𝐶𝑜𝑢𝑛𝑡𝑎𝑙𝑙為食物清單總數，𝐶𝑜𝑢𝑛𝑡𝑓為擺盤使用的食物數量，tasty值越大代表多樣性越高，擺盤越豐富。
