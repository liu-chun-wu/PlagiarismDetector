This process simulates how stitches interact with fabric.  The initial stitch model (Figure 3.9) is straight, but real embroidery stitches create an "arc" at their ends due to fabric interaction.  To simulate this, the stitch endpoints are modified.  Assuming the stitch's cross-section is a rectangle (Figure 3.10), the end shape is approximated as a quarter-circle.  This shape is represented by the equation (d-∆x)² + y² = d² (y>0, ∆x<d), where 'd' is the stitch diameter, '∆x' is the distance to the endpoint along the x-axis, and 'y' is the new y-coordinate.  Simplified, this becomes y = √(2∆xd - ∆x²).  In implementation, ∆y = d - y is calculated, and this ∆y value is subtracted from the fiber vertices' y-coordinates.  This modification results in the shape shown in Figure 3.11.
