當目標輪廓與食物輪廓面積相近時，可將食物圖片乘以仿射變換矩陣，使其對應到目標輪廓。此矩陣使用迭代最近點（ICP）演算法計算，該演算法能尋找兩組點之間的匹配關係。

演算法輸入為食物輪廓取樣點P(𝐶𝑝)和目標輪廓取樣點Q(𝐶𝑞)。為避免遺漏匹配點，採用雙向ICP。首先，將P的中心點平移至Q的中心點，即所有p ∈ P加上（𝐶𝑒𝑛𝑡𝑒𝑟𝑞-𝐶𝑒𝑛𝑡𝑒𝑟𝑝）。接著，雙向尋找P、Q之間的最近點對應關係，記錄(1)每個p ∈ P到Q上的最近點q，以及(2)每個q ∈ Q到P上的最近點p。

對應關係數量為P和Q點群數量之和。計算p、q距離時，除了歐式距離，還考慮角度因素。設𝑁𝑝⃑⃑⃑⃑⃑ 和𝑁𝑞⃑⃑⃑⃑ 為p和q的單位法向量，其內積作為距離權重，夾角越小，權重越大。

將對應點𝑝𝑎𝑖𝑟𝑝∈𝑃,𝑞∈𝑄(𝑝, 𝑞)代入方程式AX=B，解JacobiSvd，得到仿射變換矩陣。A為P點群位置信息，B為Q點群位置信息，X為旋轉和平移信息。

為避免誤差累積，每次迭代使用初始點群𝑃0 ′計算。將𝑃0 ′乘以仿射變換矩陣得到新點群，進行下一輪迭代，直到迭代次數達到上限（𝐼𝐼𝐶𝑃 = 15）。

為避免陷入局部最小值，將P旋轉0、90、180、270度，分別執行ICP，得到四個仿射變換矩陣。計算每個矩陣作用於P後與Q的平均最短距離，選擇距離最小者為最佳解。最後，將食物圖片乘以最佳解的仿射變換矩陣，得到最終結果。
