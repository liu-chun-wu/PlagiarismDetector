第二步驟中，將嵌入圖像縮小至與QR code相同大小，參考文獻[11]找出圖像邊緣，並利用邊緣特徵與主題遮罩模塊庫比對，套用最相似模塊（圖3-17）。程式執行結果套用了圖3-19的主題遮罩（圖3-18），而非適合的圖3-20。為解決此問題，加入特徵權重計算，使結果更佳（圖3-21）。


如何選取最適合的模塊？我們根據圖像邊緣經過的模塊和圖像特徵給予積分，從主題遮罩模塊庫中選取積分最高的模塊作為主題遮罩，確保圖像完整呈現（圖3-22）。邊緣覆蓋及特徵積分的計算方法將於下一節說明。
