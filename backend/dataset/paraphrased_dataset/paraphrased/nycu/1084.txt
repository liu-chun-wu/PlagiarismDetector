時間t的照片I(t)中，有n台車V(t) = {v1(t), v2(t), ..., vn(t)}，同時從CAN Bus收到m個廣播封包B(t) = {b1(t), b2(t), ..., bm(t)}。V(t)可能包含車牌、車色、車款等資訊；B(t)可能包含車牌、車色、車款、GPS、車子方向等資訊。V(t)和B(t)經資料前處理後，轉換成所需資訊。例如，V(t)經YOLO處理得到bounding box，再經前處理得到距離和角度；B(t)的GPS資料與駕駛車的x(t).loc和x(t).ot經前處理後，也得到距離和角度。

使用YOLO偵測I(t)中的車輛bounding box，計算駕駛車與鄰近車的距離和角度。假設駕駛車位於照片底部中央，角度為0°，相機視野110°，將照片垂直等分11份，由左至右依序為-50°到50°。根據bounding box的水平中心位置判斷角度。距離計算方式為：先計算bounding box的pixel寬度，與車輛實際寬度計算得到車輛在平面x軸的大小𝑙𝑣，再以𝑙𝑣 / tan 55°計算距離。

對於每台車vi(t)，包含vi(t).dist（與駕駛車x的距離）和vi(t).angle（與駕駛車x的角度）。駕駛車x的位置x(t).loc和方向x(t).ot(北方為0°)分別由GPS和磁力計取得。x也會收到鄰近車輛的廣播資料B(t)。每個bj(t)包含車款bj(t).type、顏色bj(t).color、車牌bj(t).plate、位置bj(t).loc和方向bj(t).ot。由此導出駕駛車x與bj(t)的距離bj(t).dist 和角度bj(t).angle。

最終，結合從照片、GPS和V2V廣播封包取得的距離和角度進行權重計算。
