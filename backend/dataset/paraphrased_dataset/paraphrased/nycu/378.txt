Sobel邊緣偵測後，將邊緣線條與各主題遮罩進行積分運算。邊緣線條經過一般遮罩區塊積分加1，經過紅色圓框區域積分加3。最終選取積分最高的主題遮罩。演算過程參見圖3-23至圖3-25。計算方式為邊緣線條與主題遮罩重疊區域越多，積分越高。公式如下：S = ∑ (𝐴𝑖⊕𝐵𝑖) + 𝐹𝑖 ，其中S為積分結果，A為嵌入圖像的邊緣偵測結果，B為主題遮罩，n為主題遮罩數量，F為主題特徵加權。以戰鬥機為例，圖3-24(a)為其邊緣偵測結果，圖3-24(b)為主題遮罩，白色像素為0，黑色像素為1。將圖3-24(b)黑色區域與圖3-24(a)對應位置進行互斥或運算，結果為1代表邊緣通過。在圖3-25中，邊緣共經過33個QR code區塊(標紅色)，紅色圓框額外加3積分，總積分為33+3x3=42。
