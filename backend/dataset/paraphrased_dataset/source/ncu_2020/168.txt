網路封包是以光速傳輸，理論上光速在真空環境下每秒可傳遞將近30 萬公里。但網 路封包通常是透過光纖或銅纜等介質來傳輸，實際速度會因光纖折射率或銅纜的阻抗而 減緩，而遠距傳輸會經過數量不等的路由器節點，傳輸介質與網路節點數量會增加封包 的往返時間（RTT）。例如台北到洛杉磯的直線距離有10,817 公里，光速在真空中往返需 要72ms，而封包實際在專線上的RTT 會落在180ms 左右，在網際網路上封包傳輸經過 的節點更多，RTT 會是250ms 左右。這是物理上無法避免會產生的延遲。而距離越遠， 封包經過損壞介質與故障節點的機率也越高，就會增加封包遺失的機率，因此網路延遲 與封包遺失率皆會隨著傳輸的距離越遠而越大。我們利用IBM 公司的File transfer calculator（https://www.ibm.com/aspera/file-transfer-calculator/）的建議值來模擬亞洲、歐洲、 美國及中國網際網路的延遲時間及封包遺失率，亞洲到歐洲的網路延遲為230ms 封包遺 失率為0.64%，亞洲到美國有國際海纜直連，網路延遲較低為180ms 封包遺失率為0.79%， 中國網路因政府管制的因素，造成傳入及傳出中國境內的封包遺失率變得較其他國家高 出許多，為6.2%。歐洲到美國距離最短，因此網路延遲與封包遺失最低，為140ms 與 0.1%。所有數值如表4-1 所示。 表4-1 網際網路延遲與封包遺失率 資料來源：（IBM, 2020） 個案公司於英國、台灣、中國及美國設有機房，各機房採用MPLS 專線互聯，使用 PingInfoView 實測得出網路延遲，封包遺失率使用電信商服務等級協議（AT&T, 2020） 中MPLS 專線的保證值0.1%，並帶入WANem 中測試來驗證模擬的準確度，參數如表4- 2 所示。 表4-2 MPLS 延遲與封包遺失率 資料來源：本研究 針對每種軟體的實驗，我們均採用100MB 容量的檔案與100Mbps 的頻寬。在WANem 上設定好Bandwidth、Latency 與Packet Lose 的值，便可以開始實驗，如圖4-5 所示。 圖4-5 WANem Advanced Mode 資料來源：本研究 SFTP 實驗 首先是SFTP 的測試，使用SFTP get 指令將檔案從Server 下載到Client，測試分為兩 種項目，分別是（1）使用WANem 模擬Internet。（2） 使用WANem 模擬MPLS。分別 記錄其完成時間，實驗結果如下表4-3。 表4-3 SFTP 完成時間比較 傳輸距離 實驗網路 網路延遲 （ms） 封包遺失率 （%） 完成時間 （秒） UK-Taiwan WANem Internet 0.64 US-Taiwan WANem Internet 0.79 UK-China WANem Internet 6.2 UK-US WANem Internet 0.1 UK-Taiwan WANem MPLS 0.1 US-Taiwan WANem MPLS 0.1 UK-China WANem MPLS 0.1 UK-US WANem MPLS 0.1 資料來源：本研究 由表中可看出Internet 的延遲與封包遺失率比MPLS 高出許多，進而影響整體傳輸 的完成時間。 SMB 實驗 SMB 測試，使用cp 指令將檔案從Server 複製到Client，測試分為三種項目，分別是 （1） 使用WANem 模擬Internet。 （2） 使用WANem 模擬MPLS。分別記錄其完成時 間，實驗結果如下表4-4。 表4-4 SMB 完成時間比較 傳輸距離 實驗網路 網路延遲 （ms） 封包遺失率 （%） 完成時間 （秒） UK-Taiwan WANem Internet 0.64 US-Taiwan WANem Internet 0.79 UK-China WANem Internet 6.2 UK-US WANem Internet 0.1 UK-Taiwan WANem MPLS 0.1 US-Taiwan WANem MPLS 0.1 UK-China WANem MPLS 0.1 UK-US WANem MPLS 0.1 資料來源：本研究 SMB 實驗結果在封包遺失率低的情況下，完成時間與SFTP 差異不大，但在封包遺 失率6.2%這樣的環境下，SMB 表現明顯遜於SFTP。 Tsunami 實驗 啟動Tsunami server & client 之後，在Tsunami client 執行 get 指令將檔案下載，測試 分為三種項目，分別是 （1） 使用WANem 模擬Internet。 （2） 使用WANem 模擬 MPLS。由於Tsunami 是採用UDP 傳輸，會有許多遺失的封包需要重傳，而導致整體流 量比實際要傳輸的資料還要多，我們記錄傳輸結果當中的Final file rate 以取得實際資料 傳輸速率。 實驗過程中發現Tsunami 的傳輸穩定性很差，Server 與Client 常常斷線，透過加大 heartbeat 的timeout 值才能保持穩定線，且每次傳輸完成的時間落差很大，不過仍比SMB & SFTP 的速度要快的多，結果如表4-5。 表4-5 Tsunami 完成時間比較 傳輸距離 實驗網路 網路延遲 （ms） 封包遺失率 （%） 完成時間 （秒） UK-Taiwan WANem Internet 0.64 US-Taiwan WANem Internet 0.79 UK-China WANem Internet 6.2 UK-US WANem Internet 0.1 UK-Taiwan WANem MPLS 0.1 US-Taiwan WANem MPLS 0.1 UK-China WANem MPLS 0.1 UK-US WANem MPLS 0.1 資料來源：本研究 Tsunami 實驗結果顯示，各項數據均有極為出色的表現，而且UDP 沒有封包遺失導 致滑動視窗急遽縮小的問題，因此傳輸完成時間在不同環境的差異不像使用TCP 為基 礎的SMB 與SFTP 那樣巨大。 三款軟體效能比較 圖4-6 為三款軟體分別在WANem 模擬Interne 與MPLS 網路環境下，傳輸完成時間 的總結比較。MPLS 因為具有高穩定度的特性，封包遺失率低，對於資料傳輸效率有極 大的幫助，而Internet 的穩定度雖然差，但具有成本低廉的優勢，適用於對回應速度沒有 極端要求的應用程式或資料傳輸之用。 圖4-6 三款軟體總結比較 資料來源：本研究
