為了減少MP4 metadata 內的重覆性資料，stsc box 作為儲存每一個chunk 包含的sample 個數資訊如果前一個chunk 與次一個chunk 內的sample 個數都相同即可合併成為一筆資 料（ISO/IEC/JTC 1/SC 29, 2005）。舉例來說，如表 2 中第1 個chunk 中包含15 個sample， 第2 和第3 個chunk 都含有18 個sample，而第4 個chunk 包含17 個sample，因為和前面 的第2 和第3 個chunk 所包含的sample 數不同，所以就單獨一列表示。 表 2 stsc box 精簡描述範例 No. First chunk Samples per chunk 資料來源：本研究 而stts box中紀錄負責儲存每一個sample也可以說是每一幀於畫面上要停留的時間， 相同地，如果連續的sample 所對應到的停留畫面時間長短都相同，也可以合併成一列表 示（ISO/IEC/JTC 1/SC 29, 2005）。以表 3 來說因為第1 和第2 個sample 停留在畫面上的 時間都是998 個單位，故可以合併成一列，並且於sample count 欄位內填入相同時單位 的sample 個數。第3 個sample 因為sample delta 為1072 個單位，與前面sample 的delta time 不同，所以就需獨立一列表示。 表 3 stts box 精簡描述範例 No. Sample count Sample delta 資料來源：本研究 為了後續方便修正程式碼的撰寫，會將精簡表示stsc 與stts box 還原，以表 2 來說 將還原成表 4，而表 3 將還原成表 5。 表 4 stsc box 還原描述範例 No. First chunk Samples per chunk 資料來源：本研究 表 5 stts box 還原描述範例 No. Sample count Sample delta 資料來源：本研究 第三章 系統架構 因不同種類網路攝影機所產生之錄製封裝結果，其源頭皆是透過RTSP 協定訪問安 控攝影機，攝影機於RTSP DESCRIBE 回應內返回後續使用RTP 協定之連接埠資訊，供 訪問端後續連線取得壓縮影像資料。本案攝影機為使用H.264 壓縮技術。後續客戶端接 收到串流資料後必須依照ISO/IEC-14496-12 ISO Base Media File Format 標準規範進行Meta Data 資料新增後才可以MPEG-4 檔形式儲存，其資料會相依於RTP Header 內之資訊，以 及RTP Payload 內之Network Abstraction Layer Units （NALU）內所紀錄之NALU Type 資 訊。後續將針對Media Server 訪問前端安控攝影機並將串流封裝成MPEG-4 之過程做說 明。本章包含研究流程、資料集擷取、資料解析以及最終找出影響無法播放原因。
