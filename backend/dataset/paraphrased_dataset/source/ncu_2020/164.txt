3.3.1 Secure File Transfer Protocol（SFTP） 最標準的檔案傳輸服務為檔案傳輸通訊協定（File Transfer Protocol，簡稱FTP）。FTP 特色如下。  任意的檔案內容：FTP 可以傳輸任何型態的資料，包含文件、圖片、音樂或影 片。  雙向傳輸：FTP 可以下載檔案或者上傳檔案。  支援認證及所有權：FTP 遵從檔案當中定義的所有權與存取權限制。  瀏覽資料夾：FTP 允許存取伺服器端資料夾內容。  文字化控制訊息：FTP 用戶端與伺服器端之間的控制訊息皆使用ASCII 字元表 示。  包容異質性：電腦間只要啟用了FTP 服務，使用者不須瞭解個別作業系統的操 作細節，只需透過FTP 指令即可控制檔案的存取。 FTP是用什麼方式來達成資料傳輸呢？FTP使用了兩條TCP連線，一條當作控制用， 另一條負責資料傳輸用。控制用的TCP 連線，顧名思義是用在FTP 的控制，例如確認登 入的使用者名稱及密碼，設定傳輸的檔案名稱及傳輸方法。控制用TCP 連線是透過ASCII 字串來進行請求及回應。控制用的連線不會傳輸資料，如果要傳輸資料，使用的是傳輸 資料專用的TCP 連線。如圖3-1 所示。 圖3-3 FTP 資料傳輸方式 資料來源：本研究 FTP 的控制用連線，通常使用TCP port 21。當用戶執行FTP 指令GET 或PUT 進行 檔案傳輸時，當場就會建立傳輸檔案用的TCP 連線。利用這個連線，就可以傳輸檔案。 檔案傳送完畢後，切斷資料連線。接著利用控制用的連線，執行其他指令或回應。傳輸 資料用的TCP 連線，一般會使用port 20，但也可以利用PORT 指令定義其他port 進行傳 輸。為了提高安全性，通常傳輸檔案用的port 號會以隨機亂數的方式來定義。 使用者提出中斷指令之前，都會維持連線狀態。但是大部分的FTP 伺服器都會設定 連線逾時值，當使用者一段時間沒有傳送指令時，就會強制切斷連線。 由於FTP 使用明文傳輸，為了滿足最基本的資訊安全要求，無加密功能的FTP 基本 上已經不再受到企業青睞。取而代之的是Secure File Transfer Protocol 簡稱SFTP，SFTP 包含了所有FTP 的功能並透過Secure Shell（SSH）將資料做加解密，以確保資料在傳輸 的過程中不會被竊取，如圖3-2 為SFTP 的資料傳輸流程。目前SFTP 是企業使用最為廣 泛的檔案傳輸協定之一，網路上支援SFTP 的應用程式非常普及，各式各樣介面友善的 應用程式讓SFTP 成為企業間的資料交換的過程中，不可或缺的一個選項。 圖3-4 SFTP 加密傳輸流程 資料來源：本研究 個案公司採用SFTP 主要作為與外部廠商資料交換的暫存平台，內部資料傳輸較少 使用，FileZilla 作為SFTP Client，對於一般的檔案傳輸可以應付。但是要做檔案同步就 需要自行編寫指令碼腳本（Shell Script），更複雜的工作例如來源與目的同步鏡像還需要 編寫程式才能做到，也缺乏資料壓縮與集中控管機制，持有成本方面，因為是開源軟體， 授權成本與擴充成本為5 分，SFTP 本身無自動化及Log 記錄功能，因此維運成本及風 險較高。 3.3.2 Server Message Block（SMB） SMB 是一種client/server 架構的協定，用於存取網路上的各項資源，例如印表機、 檔案等。SMB 是由IBM 在1983 年所開發，首次公開是在OS/2 網路作業系統中的LAN Manager 以及後續LAN Server。而微軟將SMB 納入到Windows 作業系統之後更將其發揚 光大，並在過去幾十年中發布了不同平台的各種版本。此外，開源軟體Samba 更提供了 在Linux 系統中運行SMB，並允許透過SMB 跨平台傳輸資料的能力。表3-1 為SMB 的 歷代版本說明。 表3-1 SMB 歷代版本 資料來源：（IONOS, 2020） SMB client 使用port 445 與網路上其他電腦通訊，進而存取網路中分享的檔案或服 務，SMB server 負責接收與處理相對應的client 請求，在IP 網路中SMB 使用TCP， client/server 雙方透過三向交握建立連線，後續資料傳輸則受TCP 協定的約束來確保傳輸 可靠。SMB 3.0 以後，支援多通道連接，使用Windows 內建之robocopy.exe 工具即可輕鬆 實現，有效利用網路頻寬來傳輸檔案，對於提升傳輸效率有相當程度的幫助。 個案公司以往採用SMB 作為內部資料交換的主要平台，透過Windows 內建的 Robocopy 工具作為檔案同步之用，Robocopy 有強大的參數調整功能可依據各種檔案同步 需求來做設計，功能算是非常全面。但Robocopy 並未提供工作排程、監視與紀錄等功 能，雖然透過Share Script 編寫可以做到基本的自動化管理，但隨著企業規模成長，後續 維運成本及風險也為之提高。持有成本方面，內建於Windows 作業系統當中，授權成本 與擴充成本為4 分。
