一般監控系統都是搭配單一品牌攝影機硬體設備結合該品牌的軟體監控平台來進行 服務銷售。因市場競爭激烈且攝影機大廠致力於推廣Open Network Video Interface Forum （Our Mission - ONVIF, n.d.）所提出的監控產業國際標準，試圖以開放式架構讓多數攝 影機製造商來標準化網路攝影機的設備控制，前述協定包含設備參數取得、事件告警設 定與推播、PTZ 控制與設定等項目。本案平台也利用ONVIF 協定針對設備設定之功能與 網路攝影機進行串接，串流部分則使用RTSP 協定（Schulzrinne et al., 1998）與攝影機進 行交談。 RTSP 協定是一純文字協定，主要做為告訴接收端後續使用之Codec 參數（以H.264 壓縮技術來說即為SPS（Sequence Parameter Set）與PPS（Picture Parameter Set）參數、身 分認證以及後續使用RTP over UDP 或是RTP over TCP 等實際連線需要之相關資訊。欲 達成於單一平台上整合不同品牌的網路攝影機，以標準非獨規協定之方式與前端設備溝 通應可以降低設備整合上之技術問題。 然而以儲存設備歷史影像功能而言，本文發現雖然串流部分皆是透過RTSP 協定來 訪問安控攝影機，後續再使用統一方法將串流轉換成MPEG-4 形式儲存，但實際上將 MP4 錄影檔放到瀏覽器以HTML5 播放器播放時會出現部分錄影檔播放中斷的現象。為 解決前述問題，本文即透過第三方MP4 結構分析工具MP4 Reader 如圖 2 以及搭配網路 封包分析工具Wireshark 如圖 1，試圖釐清何種MPEG-4 結構會導致HTML5 瀏覽器播放 失敗，以及會失敗的格式與一開始封包傳輸時的哪些內容有直接關係。 透過歸納分析找出會導致播放問題之封裝方式，在對檔案修改程度較小的情況下， 將播放異常之錄影檔進行修復。以達成在不另外於客戶端瀏覽器額外安裝外掛播放器元 件的情況下，可以兼容播放大部分廠牌之網路攝影機所產生之歷史影像檔案。如此即可 降低客戶端使用監控系統時安裝環境的複雜度，使用者只須單純利用瀏覽器即可操作所 有功能，不需再額外安裝軟件。降低使用者對系統操作之技術門檻。 圖 1 Wireshark 操作畫面 資料來源：本研究 圖 2 MP4 Reader 操作畫面 資料來源：本研究
