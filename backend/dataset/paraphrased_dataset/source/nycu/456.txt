由於上面的3.3.2 小節至3.3.5 小節皆是針對整張影像去作訓練及測試，也 就是和一般網路架構訓練資料時無異，其中大部分的圖片是以投射型攝影機 (projective camera )的角度去拍攝，也就是當人站立時，人的形體為頭上腳下， 垂直於畫面中水平線，而我們的研究是針對頂照式魚眼攝影機下的人，可以發 現影像中的人物在中間部分具有相近的特性，例如：人在頂照式魚眼攝影機的 正下方時(即影像正中間)，人只拍的到頭頂及肩膀或半身，而愈往邊緣區域， 離攝影機越遠，才能逐漸見到完整人型，且頭至腳的方向指相影像中心，人的 外觀頂照式魚眼攝影機下具有很大的形變。 因此，在此節我們將圖片劃分成兩部分，分別是中心區域以及外圍區域， 將原本對圖像只訓練一個模型拆分為訓練兩種不同的模型，其中一個模型針對 影像中間作訓練，另一個模型則針對影像的外圍區域作訓練。 下面分成中間區域及外圍區域作介紹： (1) 中心區域 • Image：以原影像中心為圓點，以原影像1/2 邊長的2/3 為半徑畫圓，將影 像中間圓形部分擷取出來，見圖3-7。 • Mask：以原影像中心為圓點，以原影像1/2 邊長的1/2 為半徑畫圓，包含 在「圓範圍內之mask」或「與圓相交的mask」才採用，視為ground truth 資料。 圖 3- 7 實驗室影像擷取中心區域 (2)外圍區域 • Image：以原影像中心為圓點，以原影像1/2 邊長的1/2 為半徑畫圓，只取 圓以外的區域，將此外圍區域分成三個part (140 度為一個part，其中重疊 20 度)，再使用最近相鄰內插法(Nearest neighbor interpolation) 將這三個 part 作轉正及拼接成一張影像作為訓練資料，見圖3-8。 • 圖 3- 8 實驗室影像外圍區域轉正 • Mask：經轉正的影像是由外圍區域的三個part 所構成，而在此張影像中視 為ground truth 的定義是：將每個part 個別向內縮30 pixel，產生個別inner rectangle (即圖3-9 的黃色長方形)。如果「mask 在inner rectangle 裡面」或 「mask 與inner rectangle 相交」，才視為 ground truth；若mask 在inner rectangle 之外，則不予採記，因為在inner rectangle 之外，往往占圖像中極 小範圍或只擷取到身體的一小部分，因此不視為ground truth。 圖 3- 9 外圍區域ground truth 區域 會使三個part 彼此之間交疊20 度的原因是：考量到如果切割120 度為一個 part 的話，可能會有人剛好位於切割的交界線上，會被分成兩半，導致完整人 型的消失，因此無法作為ground truth。此外，在中間區域及外圍區域我們也設 有交疊，就是為了防止有人因區域分割，而導致減少ground truth 的問題。 第四章 研究結果
