二值化是最簡單的一種圖像分割方法，二值化可以將灰階影像轉換成只有黑跟白的 二值影像，把大於某個閥值（Threshold）的灰階值轉為灰階最大值（白），把小於某個閥 值（Threshold）的灰階值轉為灰階最小值（黑）。二值化中閥值的算法主要分成兩類：固 定閥值以及自適應閥值，固定閥值是由程式或使用者給定一個灰階值當閥值進行二值化， 自適應閥值則是輸入影像後，程式依影像算出較為適合的閥值進行二值化。前者在我們 的方法中大量地使用，後者我們在影像前處理中，利用自適應閥值Otsu 算法來偵測絲 餅面，過濾非絲餅的背景部分使其不列入程式計算。 Nobuyuki Otsu 提出了二值化的Otsu 算法[6]，也稱最大類間差法、大津演算法，被 認為是影像分割中閥值選取的最佳演算法。二值化是按影像的灰度特性，將影像分為前 景及背景。若是背景與前景之間的類間方差越大，說明構成影響的兩部分差別越大。若 部分前景被錯分為背景或部分背景錯分為前景都會使兩部分的差別變小，類間方差越大 錯分前景、背景的機率越小，Otsu 算法即是希望讓類間方差最大使錯分機率最小。若輸 入影像大小𝑀× 𝑁，分割閥值為T，像素灰度值小於閥值T 的像素個數記為𝑁0，像素灰 度值大於閥值T 的像素個數記為𝑁1。前景的像素點數占圖像比例記為𝜔0，其平均灰度為 𝜇0，背景的像素點數占圖像比例記為𝜔1，其平均灰度為𝜇1，影像總平均灰度為𝜇，類間 方差記為𝑔。我們掃描T＝0~255，求得𝑔最大的閥值T，類間方差𝑔（式2-7）推導公式 如下： 𝜔0 = 𝑁0/ 𝑀× 𝑁 (2-1) 𝜔1 = 𝑁1/ 𝑀× 𝑁 (2-2) 𝑁0 + 𝑁1 =  𝑀× 𝑁 (2-3) 𝜔0 + 𝜔1 = 1 (2-4) 𝜇= 𝜔0 ∗𝜇0 + 𝜔1 ∗𝜇1 (2-5) 𝑔= 𝜔0 ∗(𝜇0 −𝜇)2 + 𝜔1 ∗(𝜇1 −𝜇)2 (2-6) 𝑔= 𝜔0𝜔1 ∗(𝜇0 −𝜇1)2 (2-7) 經過Otsu 算法得到閥值後做二值影像（如圖2-2 所示），從影像中可以看到絲餅面與拍 攝背景很好的被分割，利用此二值影像我們可以讓程式避免計算背景部分，使程式加速 並減少誤判。 圖2-2 絲餅原圖及其Otsu 二值化影像 第三章 外溢瑕疵絲餅檢測法 本章節介紹本文檢測外溢瑕疵的兩種方法，在3.1 節中，我們介紹基於光影變化來 分析檢測外溢瑕疵的方法－Shadow Scan Method。在3.2 節中，介紹基於梯度來分析檢 測外溢瑕疵的方法－Dominant Gradient Analysis。兩方法的共同處是都將絲餅影像切成 固定大小的區塊，分析區塊內的特性，並且都有先做第二章的影像前處理來輔助檢測。
