在HAProxy 作為前端專用負載平衡，負責把外部的Request 分派 導向至後端多台Server 上，如遇不可預期的狀況使HAProxy 發生中 斷，則Cluster Servers 所提供的服務則會一併造成中斷，為不使 HAProxy 運作成為Single point of failure，故使用Keepalived[28, 29]軟 體實現VRRP 技術，在Master HAProxy 運作發生問題時即時由 Backup HAProxy 進行接手，為驗證該功能正常運作故安排實驗過程 如下：首先同樣利用Jmeter 進行模擬同時50 次的外部Request，並 在傳輸的過程中切斷Master HAProxy 的VM 對外網路，模擬當下 Master HAProxy 因故離線，而此時Keepalived（VRRP）功能運作， 在確認Master HAProxy（140.113.199.123）無法提供服務時，Backup HAProxy（140.113.199.124）隨即接手進行後續工作，實驗結果如下 圖12 所示：Master HAProxy（140.113.199.123） Log 中最後一筆記錄 為 Jun 26 15:16:53 來源為140.113.199.10 的HTTP Request，下一刻Master HAProxy 發生中斷狀況，Backup HAProxy（140.113.199.124） Log 中 記錄隨即於Jun 26 15:16:57 接替Master HAProxy 處理來源同樣為 140.113.199.10 的HTTP Request 連線，過程中斷時間約3 秒鐘，而同 樣的於下圖13 可證明同時間由140.113.200.141 對HAProxy WAN VIP （140.113.199.130）進行ping 的動作，期間有中斷的狀況，而後隨即 恢復連線，過程證明為HAProxy WAN VIP 由Master HAProxy 換手至 Backup HAProxy 上，並由Backup HAProxy 接手處理後續來源為 140.113.199.10 的HTTP Request，測試於Master HAProxy 異常時可由 VRRP 協定運作轉由Backup HAProxy 繼續提供正常服務。 圖 12 HAProxy VRRP(Keepalived)功能運作測試結果 圖 13 HAProxy WAN VIP 切換測試結果
