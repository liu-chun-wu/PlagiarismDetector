安裝樹莓派魚眼攝影機至天花板的時候，會因為天花板結構的關係，導致樹 莓派旋轉。為了能夠得到樹莓派旋轉角，會先進行鏡頭校正。 由於樹莓派的鏡頭比較偏屬於膨脹的類型。通過校正後，可以看出地板，比 較類似人類視覺的感受如圖3-4。為了得到樹莓派旋轉角，以地板上的交叉點作 為基準，通過暴力法的方式嘗試每個角度，對比於世界座標轉影像座標，當誤差 最小的時候，將當下的旋轉角作為該樹莓派的旋轉角度。 [ r11 r12 r13 t1 r21 r22 r23 t2 r31 r32 r33 t3 ] × [ X Y Z ] = [ 𝑢 𝑣 ] 其中r11 … r33為xyz 旋轉角相乘後，t1, t2, t3為樹莓派實際位置，X, Y, Z為標記 地板的世界座標，u, v為標記地板的對應的影像座標。 雖然上述的公式，需要六個自由變數，如：三個位移，三個旋轉角。實際上， 由於樹莓派是頂照式的，垂直向下。所以只需要用到三個位移以及一個旋轉角， 另外兩個旋轉角則忽略不計。其中三個位移是利用測距儀得到的。利用測距儀對 準樹莓派的鏡頭，可以得到高度的位移。在利用平面地板，估算測距儀的位置， 作為另外兩個的位移。 圖 3 - 4 鏡頭鏡正前的原影像(左)和校正後的影像(右)
