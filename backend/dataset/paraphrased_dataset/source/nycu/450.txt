將影片擷取為圖片後，我們需要把畫面中的人物標注起來，以作為網路模型 的訓練資料使用，在標注方面須將整個人型遮罩(Mask)標注起來，以符合模型架 構的輸入所需。 在人物偵測的ground truth 部分，我們影片每五秒去擷取一張frame，再使用 肉眼比對前後相連的frame，若影像中的人物在連續擷取的frame 中沒有動作或 走動則將影像作刪除，以防影像frame 之間的重複性，當統整完訓練資料後，再 人工手動去標記人型。為了資料的完整性，除了完整在畫面上拍到全身的人之外， 我們也會標記只露出一部分身體的人，例如：被貨架遮蔽的人、蹲下的人、坐著 的人，或是重疊到一部分的人等等。 我們的標記程式使用到了超像素(Superpixel)的概念，超像素的概念是把影像 中具有相似特性的像素聚合起來，形成一個更具代表性的區塊，超像素的概念經 常應用於圖像分割(Segmentation)，目的是簡化或改變圖像的表示方式，使得圖像 更容易理解或分析，精確地說，是對圖像中的每個像素加標籤的一個過程，使得 具有相同標籤的像素聚合在一塊。利用超像素的概念，讓我們在標注大部分的圖 片時，能加快標注的速度。 標注程式如下圖3-3 所示，其中圖像上紅色的多個區塊即是超像素劃分的結 果，而藍色遮罩是標注完成的人型遮罩，標注時須沿著人型邊緣作標注，而不只 單純標注bounding box。 圖 3- 3 標注程式示意圖。 標注完成後，我們需將檔案轉成.json 檔，以方便程式的讀取，內容包含影 像檔名、物件種類、mask 的輪廓座標、mask 的輪廓面積以及bounding box 的 座標。
