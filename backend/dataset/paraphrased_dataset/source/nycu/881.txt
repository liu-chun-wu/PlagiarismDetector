Further, to speed up the computation and reduce the amounts of data of equation (5), we use singular value decomposition (SVD) to reduce the dimension of the matrix ğ“â€². After SVD calculation, ğ“â€² can be rewritten as ğ“â€² = ğ”ğšºğ•ğ‘‡,                        (6) where ğ”âˆˆâ„ğ‘šÃ—ğ‘š, and ğ•âˆˆâ„ğ‘›Ã—ğ‘› are orthogonal matrices, that is ğ”ğ‘‡= ğ”âˆ’1,and ğ•ğ‘‡= ğ•âˆ’1. ğšºâˆˆâ„ğ‘šÃ—ğ‘›  is a diagonal matrix of same dimension of ğ“â€² . We reduce the dimension by discarding the singular values in ğšº, and keep a percentage of energy ğ›¼ as defined below, âˆ‘ ğšºğ‘–ğ‘– ğ‘˜ ğ‘–=1 âˆ‘ ğšºğ‘–ğ‘– ğ‘› ğ‘–=1 â‰¥ ğ›¼,                            (7) Here we select ğ›¼= 90%. By selecting the top ğ‘˜ values in, we can reduce the dimension of ğšº to ğ‘˜Ã— ğ‘˜, and also reduce ğ” to ğ‘šÃ— ğ‘˜ and ğ•ğ‘‡ to ğ‘˜Ã— ğ‘›. We redefined ğ“â€² as ğ“â€² = ğ€ğ™,                               (8) where ğ€  is ğ”  with dimensionality reduction, and ğ™  is the product of a diagonal matrix composed by top ğ‘˜ elements of ğšº and ğ•ğ‘‡ with dimensionality reduction, both shown below, ğ€= [ğ”1, ğ”2, â‹¯, ğ”ğ‘˜],                         (9) ğ™= diag([ğ”1, ğ”2, â‹¯, ğ”ğ‘˜])[ğ•1, ğ•2, â‹¯, ğ•ğ‘˜]ğ‘‡.            (10) By equations (5) and (8), we can get ğ’= ğ€ğ™ğ‘â€².                             (11) We reconstruct the templates as the matrix ğ“â€² and do the SVD on it on PC offline. The matrix is saved as an yml file for reading on the mobile device. To speed up the computation, the matrix multiplication of score vector ğ’ is executing in parallel for each row using OpenMP.
