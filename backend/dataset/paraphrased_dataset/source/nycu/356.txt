此小節描述如何應用行人重識別模型來進行追蹤。其步驟如下： 1. 從第一幀為起點，此幀所有偵測框皆初始化為追蹤序列。 2. 從第二幀開始，其偵測框將與現有之追蹤序列進行資料匹配： I. 初始化一距離矩陣𝐷，其形狀為追蹤序列數量Ｍ，乘上新偵測框數量 Ｎ之二維矩陣，此陣列之所有值以極大值𝐾填滿。 II. 計算兩兩追蹤序列以及新偵測框之歐式距離。此時只有當追蹤序列尾 端的偵測框與新偵測框有重疊部分時才進行距離計算。此處追蹤序列 計算依據為過往特徵值加權後的平均特徵值，其加權方式為： 𝑓𝑎𝑣𝑔= 0.5 ∗𝑓𝑎𝑣𝑔+ 0.5 ∗𝑓𝑐𝑢𝑟 𝑓𝑎𝑣𝑔為過往特徵值的加權平均，𝑓𝑐𝑢𝑟則為新加入的特徵值。此方法目的 為加重越接近現在的過往特徵值的權重，而越早之前的特徵值會隨著 每次的0.5 權重而變得不重要。 III. 計算完兩兩距離後，使用貪婪演算法（greedy algorithm），從距離最小 的配對開始取。當取出追蹤序列𝑚𝑖以及新偵測框𝑛𝑗為配對時，將𝐷的 第𝑖行以及第𝑗行設置為極大值𝐾。重複此步驟直到𝐷中所有值皆為𝐾， 或者距離大於一閥值𝐷𝑥，即停止此步驟。本文實驗時𝐷𝑥皆設為0.2。 IV. 配對成功的追蹤序列與新偵測框，若相差之幀數恰為1，則直接將新 偵測框接上，否則進行中間偵測框填補。方法為追蹤序列尾端的偵測 框與新偵測框間相差的幀數，以線性的方式計算中間偵測框，並從圖 片中擷取此區域，輸入模型得到特徵值。此特徵值若與追蹤序列之加 權平均特徵值距離小於𝐷𝑥，則視為填補正確，否則跳過此幀。 V. 未配對成功之追蹤序列將記錄其配對失敗次數，當大於一設置之閥值 𝑃𝑑，即視為追蹤序列已丟失，往後的配對不將其列入考慮。本文𝑃𝑑設 定為10。 VI. 未配對成功之當幀偵測框，初始化為新的追蹤序列。 VII. 重複步驟𝐼𝐼.至𝑉𝐼.，直到處理完最後一幀，即完成追蹤演算法。 此追蹤演算法為一幀一幀處理，若FPS 要求較低，或使用架構較為簡單的 模型，減低中間計算時間，即可視為實時（real time）追蹤演算法。
