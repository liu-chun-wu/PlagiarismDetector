在第二步驟中，先將要嵌入的圖像縮小成與QR cod 一樣的大小，然後參 考文獻[11]的方法找出圖像邊緣，再利用邊緣特徵與主題遮罩模塊庫中的模塊 比對找出最相似的來套用，方法流程如圖3- 17 圖3- 17 找主題遮罩流程 Resize Sobel edge detect Find model 我們發現程式執行的結果圖3- 18，它是套用到圖3- 19 的主題遮罩，並非 套用到適合的主題遮罩圖3- 20，若遇到此種情況，我們加上了特徵權重計算來 解決這個問題，讓我們可以套用的適合的遮罩得到較好的結果如圖3- 21。 圖3- 18 執行結果 圖3- 19 套用的主題遮罩 圖3- 20 適合的主題遮罩 圖3- 21 較佳的執行結果 如何從主題遮罩模塊庫中找出最適合的模塊? 我們利用圖像邊緣經過的模 塊與圖像特徵，各給予積分並在主題遮罩模塊庫中積分最高的模塊將會被選取 作為主題遮罩，讓圖像在此區域內可以完整呈現不失真。選取主題遮罩模塊的 流程請參考圖3- 22，計算邊緣覆蓋及特徵積分的方法，將於下一節特別說明。 圖3- 22 主題遮罩模塊選取流程 圖像邊緣探測 計算邊緣覆蓋及 特徵積分 從主題遮罩模塊庫中 選取模塊 主題遮罩模魂庫中是否 還有其他模塊 選取最高積分的模塊 是 否
