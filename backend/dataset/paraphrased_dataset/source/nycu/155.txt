本研究使用名為ChestX-ray14 的公開資料集作為訓練資料，ChestX-ray14 是由美國 腔X 光片的公開資料集。此份資料集中的主要內容共包含112,120 張的胸腔正面X 光線 影像、一份名為Data_Entry_2017.csv 的Metadata 文件、兩份分別名為train_val_list.txt、 test_list.txt 的資料分類文件。以下將個別說明各項文件中的內容。 圖三十九為Metadata 中的各項屬性資料。其中追蹤編號欄位為0，表示該為病人第 一次拍攝。因此，第二次拍攝為追蹤之開始，編號為1，後續編號表示第幾次追蹤。 圖三十九、Metadata 中的各項屬性資料 Metadata 中的Finding Labels 為各影像從放射學報告中，使用自然語言處理(Natural Language Processing)提取出的異常名稱，一共包含以下14 種異常，分別為：肺不張 (Atelectasis)、心臟肥大(Cardiomegaly)、肺積液(Effusion)、浸潤(Infiltration)、腫塊(Mass)、 結節(Nodule)、肺炎(Pneumonia)、氣胸(Pneumothorax)、肺實變(Consolidation)、肺水腫 (Edema)、肺氣腫(Emphysema)、纖維化(Fibrosis)、胸膜增厚(Pleural Thickening, PT)、疝 氣(Hernia)。除了上述的14 種異常外，未包含上述14 種異常的影像及疑似之不確定異 常[8]則標記為No Finding。112,120 張影像中，共有60,361 張影像被標記為No Finding， 即這60,361 張影像皆未包含上述14 種異常。表六為各項異常所含之影像數量。 表六、各項異常所含之影像數量 ChestX-ray14 重疊(Overlap) 總數 112,120 - 肺不張 11,559 7,344 心臟肥大 2,776 1,683 肺積液 13,317 9,362 肺浸潤 19,894 10,347 腫塊 5,782 3,643 結節 6,331 3,626 肺炎 1,431 1,109 氣胸 5,302 3,108 肺實變 4,667 3,357 肺水腫 2,303 1,675 肺氣腫 2,516 1,624 纖維化 1,686 胸膜增厚 3,385 2,259 疝氣 無發現異常 60,361 而根據影像編號及病患年齡來判斷，此資料集中包含的112,120 張影像中，共有 30,805 位患者的資料中，而每位患者的影像至少為一張，至多為183 張。根據年齡資料 顯示，每位患者的多張影像，不一定是連續拍攝之影像，因此本論文將所有影像皆視為 個別拍攝之影像。 train_val_list.txt、test_list.txt 這兩個分類資料，為ChestX-ray14 資料集提供的，已分 類好的訓練資料及測試資料清單，內容為影像的檔案名稱，依據這兩份資料中的檔案名 稱，將影像分為86,524 筆訓練驗證資料、25,596 筆測試資料，其中同位病人的資料不會 同時出現在訓練驗證資料或測試資料中。 在此份資料集中，同一張影像可能會擁有兩種或兩種以上的異常(Finding Labels 可 能有兩個以上)，代表著同一張影像可能會有兩種以上的標記。在訓練模型之前，需先將 影像的標籤做統整，因此根據Metadata 中的Finding Labels 欄位，將各影像所含之異常 作數值轉換。本論文撰寫了新的程式，並建立了新的檔案存放轉換後的影像標籤，將影 像編號作為縱向索引，如圖四十藍框部分，14 種異常作為橫向索引，如圖四十紅框部分。 圖四十、新建檔案之橫向縱向索引 根據Metadata 中的Finding Labels 欄位，若影像中含有某項異常，則在該影像的該 異常索引位置標記為1，若無則標記為0，並將轉換後的資料存入新的檔案中，如圖四 十一。在資料標籤的部分，由於一張影像可能包含多種異常，因此將一張影像的標籤表 示為一個長度為14 的一維陣列，以數學式可表示為 ] ,..., ,..., [ C c y y y y  ，其中  1,0  cy 、  C 。若  cy 則表示不存在C 異常；若  cy 則表示存在C 異常。 圖四十一、ChestX-ray14 中各影像所含之異常
