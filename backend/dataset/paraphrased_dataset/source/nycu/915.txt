Keepalived 是一個使用C 語言所編寫而成的路由開放原始碼軟 體，設計的主要目標是提供簡單而強大的負載平衡與高可用性，以 檢查程序監控Cluster 中成員的健康狀況，以維持高可用性的運作。 Keepalived 為實現VRRP 協定的軟體，透過VRRP 協定的運作模式， 於運作中主要為Master Server 提供線上服務，在Master Server 因故發 生問題時由Backup Server 接手繼續完成未完成的工作，不至於因 Master Server 發生問題而造成服務中斷，Keepalived 並支援BFD （Bidirectional Forwarding Detection，簡稱為BFD）協定[20]，提高檢 查程序的正確性，使故障發生時更快的被VRRP 運作模式中查覺而 觸發Backup Server 接手未完成的工作。 本論文中Keepalived（版本：1.2.24）安裝於2 台作業系統為 Ubuntu Linux（版本：16.04.6）的HAProxy Server 上，互為VRRP 協 定中的Master Server 與Backup Server，運作模式為Active-Passive 僅 使用上述所描述的高可用性功能，負責2 台HAProxy Server 的換手 運作，並透過keepalived 創建出2 個VIP（Virtual IP），分別為對外 WAN 介面的WAN Virtual IP 與對內LAN 介面的LAN Virtual IP，該2 VIP 乃是使用IP Alias 的方式設定於實體介面上，故於OSI 第二層 （Data Link Layer）定址乃是共用實體網路卡的網卡位址，而非 VRRP 協定中的所規定的創建虛擬網卡位址，故在Master Server 切換 至Backup Server 的過程中會有微小的服務中斷時間，此中斷時間乃 是在網路交換器上重新更改VIP 的ARP Table 中的對應網路卡位 置，雖然切換過程會有微小的中斷時間，但仍可完成服務轉移功 能，下圖4 為此架構中的keepalived 設定檔，該設定檔中則明確指出 所建立的WAN VIP 與LAN VIP。 圖 4 Keepalived 設定檔
