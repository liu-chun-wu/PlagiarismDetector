在2.1 節提到的原本機率佔有圖人物定位方法[15] 的收斂方法，是對於每個網格上 的虛擬人型立板都必須去計算其條件佔有機率，雖然利用了積分影像計算方法來加快處 理速度，但是根據監控區域的大小，網格的數量可能會達到4000 多個以上(本論文所劃 分的網格有4489 個)。而在[18]中提到改良虛擬人型立板收斂方法，如本節所回顧，第 一為減少需要進行收斂計算的網格數量，第二是只考慮個別網格（而不是所有的）上虛 擬人型立板的機率收斂，因此能夠加速[15] 的方法在收斂上的執行速度。 2.3.1 候選網格位置(candidate grid locations，CGLs) 在[18] 中首先使用了[19] 的方法，利用多攝影機的影像處理來篩選出需處理的網 格，以減少需要收斂的虛擬人型立板的數量。在攝影機所拍攝的前景影像上，先產生經 由消失點延伸出的線段，如圖2-8(a)，再將每兩台攝影機前景上成對的線段資訊投影到 3D 地平面上，並將3D 平面上的線段進行過濾，不符合規則的線段會被當成雜訊去除。 過濾之後，剩下的線段在地平面上會產交集，並將從交集點所產生的3D 線段(如圖2- 7(b)中的綠色線條代表可能是人的3D 線段)，之後再對線段做分群以區別不同的人。在 [18]之中，作者利用部份的線段取樣方法去找人可能在的網格位置，並將被多條線段經 過的網格視為「候選網格位置」(candidate grid locations, CGL)。 (a) (b) 圖2-8. (a)由消失點所延伸出的線段投影到前景影像上，(b)將線段投影到3D 地平面上取交集的示意圖， 點𝑃12為線段𝐿1與𝐿2的交集[19] 2.3.2 候選網格位置上虛擬人型立板的機率收斂計算 在章節2.1 有提到機率計算的方法，而[15] 中機率佔有率人物定位的虛擬人型立板 收斂條件有兩個，第一個為虛擬人型立板最大機率計算迴圈為100 次，若超過100 次會 馬上收斂；第二個為機率計算穩定就收斂，若在回合t+1 計算的機率與上一回合t 計算 機率的差距小於10−4的次數達到5 次，就使機率收斂。 若是使用[15] 的收斂方法，即使某些候選網格的虛擬人型立板佔有機率收斂得比其 他快，但所有網格的迭代次數都被迫相同。因此，在[18] 中作者提出兩個對於機率收斂 的加速方法，其一為單獨考慮每個候選網格位置的機率收斂，一旦其佔有機率穩定，候 選網格將不會被進一步分析其機率，其二，作者提出了另一種終止條件，如果一候選網 格上虛擬人型立板佔的佔有機率在連續8 個迭代中增加或減少，則終止該候選網格的收 斂。由圖2-9(a)與(b)的比較，可看出兩者結果相差不大，最後，預測會有人的紅色網格 部份會被聚集成一個人物位置。 (a) (b) 圖2-9. 候選網格位置的俯視圖，藍色與紅色格子為所有的候選網格，紅色格子為最後預測出的人物位 置。(a)每回合計算時，每個候選網格位置的機率收斂的結果 (b)使用[18] 提出方法的結果（圖片來源: [18] ） 經過以上對機率佔有率人物定位方法[15] 的理解，我們探討在候選網格位置的判斷 機率收斂的方法是否還能再做改變，而能增加[15] 的計算效率。本論文中，我們根據[18] 的收斂方法對於判斷機率收斂方面再提出新的預測收斂方法進行改進，並將新的預測收 斂方法與[17] 的線段取樣方法做結合，希望能在不降低人物定位準確度的情況下提升機 率佔有率人物定位方法的計算效率。我們將會在第三章對該做法進行介紹。 第三章 加速機率佔有率人物定位之機率 收斂方法 在本章節我們想透過研究候選網格上的虛擬人形立板計算機率後，在每個迴圈結束 時的資料變化，從此來發想是否有加速機率佔有率人物定位之機率收斂方法。我們首先 會觀察原始影像的機率資料變化，再來使用由2.2 節提到的壓縮影像方法，轉換原始影 像為壓縮影像，並探討壓縮影像的機率變化，最後討論加速收斂的方法。
