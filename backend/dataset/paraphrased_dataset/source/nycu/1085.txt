從前處理模組，我們獲得了所需資料。由於照片中可能有不止一輛汽車和 廣播資料可能不止一輛汽車，為了將照片與廣播的汽車配對在一起，我們定義 了一個權重模組來計算相似度，若權重值越高，則此配對的相似度與bounding box相對應的機會越大。但權重愈高，不見得結果是正確的，所以需要配對模組 做比對。 𝑊𝑊(𝑡𝑡) = ൦ 𝑊𝑊11(𝑡𝑡) 𝑊𝑊12(𝑡𝑡) … 𝑊𝑊1𝑛𝑛(𝑡𝑡) 𝑊𝑊21(𝑡𝑡) 𝑊𝑊22(𝑡𝑡) … 𝑊𝑊2𝑛𝑛(𝑡𝑡) ⋮ ⋮ ⋱ ⋮ 𝑊𝑊𝑚𝑚1(𝑡𝑡) 𝑊𝑊𝑚𝑚2(𝑡𝑡) … 𝑊𝑊𝑚𝑚𝑚𝑚(𝑡𝑡) (3.7) 上面定義的權重矩陣𝑊𝑊(𝑡𝑡)包含了一系列的權重元素，配對模組計算權重矩 陣的每一列，去決定廣播車輛及照片車輛的唯一的配對。 例如3.2.2節表一，權重矩陣𝑊𝑊(𝑡𝑡)為： 𝑊𝑊(𝑡𝑡) = ൤𝑊𝑊11(𝑡𝑡) 𝑊𝑊12(𝑡𝑡) 𝑊𝑊13(𝑡𝑡) 𝑊𝑊21(𝑡𝑡) 𝑊𝑊22(𝑡𝑡) 𝑊𝑊23(𝑡𝑡)൨= ቂ0.74 0.71 0.80 0.19 0.26 0.70ቃ (3.8) 對每一個照片車輛訊息V𝑖𝑖(𝑡𝑡)，有一組權重集合{𝑊𝑊𝑖𝑖1(𝑡𝑡), 𝑊𝑊𝑖𝑖2(𝑡𝑡), … , 𝑊𝑊𝑖𝑖𝑖𝑖(𝑡𝑡)}。 例如𝑣𝑣1對應的權重集合{𝑊𝑊11(𝑡𝑡), 𝑊𝑊12(𝑡𝑡), 𝑊𝑊13(𝑡𝑡)}，𝑣𝑣2對應的權重集合 {𝑊𝑊21(𝑡𝑡), 𝑊𝑊22(𝑡𝑡), 𝑊𝑊23(𝑡𝑡)}。 這個模組首先計算𝑊𝑊(𝑡𝑡)的每一列，計算照片中的第i輛車V𝑖𝑖(𝑡𝑡)與週遭車輛的 廣播訊息B(𝑡𝑡)的信心值。V𝑖𝑖(𝑡𝑡)的信心值定義如下： 𝐶𝐶𝑖𝑖(𝑡𝑡) = 𝑚𝑚𝑚𝑚𝑚𝑚{𝑊𝑊𝑖𝑖1(𝑡𝑡),𝑊𝑊𝑖𝑖2(𝑡𝑡),…,𝑊𝑊𝑖𝑖𝑖𝑖(𝑡𝑡)} 𝑊𝑊𝑖𝑖1(𝑡𝑡)+𝑊𝑊𝑖𝑖2(𝑡𝑡)+⋯+𝑊𝑊𝑖𝑖𝑖𝑖(𝑡𝑡) (3.9) 由方程式(3.9)可以推出(3.8)的C1(t) = 0.80 0.74+0.71+0.80，C2(t) = 0.70 0.19+0.22+0.70 可以想見，一列中的權重信心值愈大，此配對的相似度愈高。我們的配對 模組使用信心值將𝑉𝑉(𝑡𝑡)的車與𝐵𝐵(𝑡𝑡)中的車輛做媒合配對。首先選擇信心值最高 的𝐶𝐶𝑖𝑖(𝑡𝑡)中的v𝑖𝑖(𝑡𝑡)配對與使𝑊𝑊𝑖𝑖𝑖𝑖(𝑡𝑡)為最大的b𝑗𝑗(𝑡𝑡)形成一個三元組 {𝑉𝑉𝑖𝑖(𝑡𝑡), 𝐵𝐵𝑗𝑗(𝑡𝑡), 𝑊𝑊𝑖𝑖𝑖𝑖(𝑡𝑡)}，將此三元組放入𝑆𝑆(𝑡𝑡)中。接下來，我們從𝑊𝑊(𝑡𝑡)裡移除第i 列和第j行的元素得到𝑊𝑊′(𝑡𝑡)，再使用𝑊𝑊′(𝑡𝑡)重複上面的過程去選擇下一個三元 組。直到𝑉𝑉(𝑡𝑡)或𝐵𝐵(𝑡𝑡)沒有其他元素。𝑆𝑆(𝑡𝑡)即為我們的最終配對結果。 因C2(t)大於C1(t)，𝑣𝑣2對應的權重集合最大值為0.70，故我們得到 W(t) = ቂ0.74 0.71 0.80 0.19 0.26 0.70ቃ，𝑆𝑆(𝑡𝑡)={(𝑉𝑉2, 𝐵𝐵3, 0.7)} =>  W′(t) = [0.74 0.71]，𝑆𝑆(𝑡𝑡)={(𝑉𝑉2, 𝐵𝐵3, 0.7), (𝑉𝑉1, 𝐵𝐵1, 0.74)} 針對表格十的資訊，我們最後可以得到𝑆𝑆(𝑡𝑡)的配對結果：照片𝑉𝑉2車輛對應 𝐵𝐵3車輛，照片𝑉𝑉1車輛對應𝐵𝐵1車輛。 四、 以CARLA 平台產生實驗數據 在此章節，我們使用了一個CARLA[27]的模擬軟體來設計實驗，評估我們 方法的正確率。
