CARLA(Car Learning to Act)為自駕車研究的一個開源模擬器，它不僅提供 了開源程式碼及協定，同時也提供城市建築、道路及地圖…等數位資產。此模 擬平台規格彈性，且具有多種感測器，例如：GPS座標、車速、加速度…等， 不同環境情況，例如：晴天、雨天…等。 CARLA在Unreal Engine 4 (UE4)做為開發層，UE4為非商業用途免費提供影 像最新的渲染技術、擬真的物理特性。如圖七所示，CARLA可模擬動態的世 界，以Server、Client系統做為介面，Server端執行模擬及場景的渲染，而Client 端以python做為開發，發送請求至Server並接收感測器回報的資料。Client可以 控制場景中的車輛轉向、加速、剎車…等、改變環境條件光照、天氣…等，支 援多種感測器RGB相機、深度照片機…等。 圖七：CARLA的系統介面 CARLA具有以下幾個特性： Client Client Client Client Server 一個server多client架構的擴增特性：多個client可在同一節點或不同節點控 制不同的actors(如：車輛、行人…等)。 具彈性的API：CARLA展示了一個強大的API控制不同需求的模擬，包括 交通流量、行人行為、天氣變化…等。 自動駕駛的感測器套件：使用者可以按照需求配置不同的感測器套件，包 括光達、照相機、深度照相機和GPS…等。 可以規劃及控制快速的模擬情境：此模式停用渲染而不需要提供圖片，可 以快速地執行交通模擬和道路行為。 地圖產生：使用者可以依照OpenDrive的標準，透過使用像RoadRunner的工 具就能很簡單地建立自己所需的地圖。 交通情境的模擬：CARLA提供ScenarioRunner允許使用者根據模組化的行 為定義和執行不同的交通情況。 ROS的整合：經由CARLA的ROS-bridge，提供ROS的整合。 自動駕駛的基準：CARLA使用agent包括AutoWare agent和條件式的模仿學 習agent來提供自動駕駛的基準。 圖八展示了CARLA提供的功能。 圖八：CARLA 的功能 以下我們以CARLA 0.9.X介紹幾個CARLA python API重要的功能，首先說 明在CALRA中有幾個核心概念。 Actor(演員):在模擬中Actor可以扮演任何角色，可以被移動到不同的地方， 例如：車輛、行人、和感測器…等。 Blueprint(藍圖): Blueprint的功用在於創建一個actor前去指定它的屬性， CALRA提供一個blueprint library包含所有可用的actors的定義。 World(世界): World代表現在使用的地圖且包含將一個blueprint轉換成一個 actor。它也提供了路線圖的存取和改變天氣情況的功能。 CARLA提供了一些範例python code供使用者使用修改。例如spawn_npc.py 可以依需求建立適合數量的車子。而執行manual_control.py則可以建立真實世界 的畫面。 在manual_control.py中有9個class分別為： 1、World：目前CARLA使用的地圖 2、KeyboardControl：鍵盤可控制的功能 3、HUD：顯示CARAL資訊 4、FadingText：顯示notification資訊 5、HelpText：顯示help資訊 6、CollisionSensor：Collision Sensor 7、LaneInvasionSensor：Lane Invasion Sensor 8、GnssSensor：Gnss sensor 9、CameraManager：相機管理功能 此篇論文使用的CALRA平台環境如下： Linux：Ubuntu 16.04.5 CARLA版本：CARLA 0.9.5 Server端執行：./CarlaUE4.sh Client端執行：python manual_control.py
