在上階段取得車牌位置影像後，進行以處理。步驟如下: a. 首先將可能是車牌影像灰階化，執行直方圖均衡化增加對比度。 再高斯平滑。 b. 接著用兩種方法各別做二值化。區域閥值(AdaptiveThreshhold)， block size=33。另一種利用Laplace operator觀念提出的決定區 域二值化閥值的方法。 1. 依輸入分割寬高格子數(W_GridNo/H_GridNo)，將原圖分 割。最右邊格寬>=avg_Width，最下邊格寬>=avg_Height 2. 每個格子均做Laplace運算: 3. Laplace運算子為：[ −1 −1 −1 −1 ] lapla=4*I(n,m)-I(n,m-1)-I(n,m+1)-I(n-1,m)-I(n+1,m) where I(n,m) is Intensity of pixel(n,m) 4. 計算結果正負值個別累加個數。 停車場入口之車牌影像辨識 5. 計算邊界上像素平均強度µp= pos/pCount; 6. 計算邊界邊像素平均強度µn= neg/nCount; 7. 求邊界上以及邊界邊像素強度標準偏差σ p、σ n; 8. 求k:使得µp-kσ p=µn+kσ n; 9. 閥值t=µp-kσ p=µn+kσ n 10. 用閥值t做反二值化 圖 48 兩種二值化的效果 資料來源:本研究整理 c. 再經3x3 Open 操作，去除非字元的小白斑點。 d. 利用and operation去除高<15&&寬<15白色區域。 圖 49 AND 操作 資料來源:本研究整理 e. 尋找內外輪廓及包圍輪廓之最小矩形及最小正矩形。 f. 從所有矩形找出正矩形高度>30，誤差10%以內，中心點y座標 誤差40%內，傾斜角誤差10%內。選取一組數量最多的。 停車場入口之車牌影像辨識 g. 兩種二值化影像比較一組內輪廓數較多的，以下程序就以該二 值化影像操作。 h. 如果輪廓數量<=5。在二值化的影像上，依所得到字元輪廓最 高點及最低點畫厚度2pixel黑線段線。斜率m求法是利用已得 到的所有字元輪廓的中心點，採用最小平方法與迴歸直線及克 拉瑪法公式則求解方程。如圖50、51所示: 圖 50 通過各輪廓中心點最適直線的斜率求法 資料來源:本研究整理 圖 51 清除車牌字元上下位置 資料來源:本研究整理 停車場入口之車牌影像辨識 i. 重覆步驟e、f。如果數量小於四個-則判為影像內無車牌。 j. 將取得的旋轉矩形依x座標排序。再分別計算高、寬、旋轉矩 形中心點間距、兩相臨中心點連線斜率及傾角的平均及標準偏 差。去除與平均值差大於2個標準偏差者。再計算每項平均。 k. 字元個數小於7個時。尋找間距大於1.6倍平均間距。 l. 依j.計算的數據，產生旋轉矩形，但寬度為平均寬的0.8倍，放 於二值化的影像上，中心貼齊依照計算的位置。執行以下演算。 圖 52 插補字元演算法 資料來源:本研究整理 圖 53 插補字元範例 資料來源:本研究整理 m. 字元個數小於7個時。再繼續尋找間距大於1.6倍平均間距，Do l項。 n. 字元個數小於7個時且第一字元與影像左側距離大於1.2倍平 停車場入口之車牌影像辨識 均間距。插入字元。步驟如l項。 o. 字元個數小於7個時且最後字元與影像右側距離大於1.2倍平 均間距。插入字元。步驟如l項。 p. 依每個旋轉矩形之傾角做轉正。並擷取。並轉換成20x40統一 尺寸。
