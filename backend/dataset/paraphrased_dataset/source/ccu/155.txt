信譽系統用於計算節點信譽，節點擁有越高的信譽，代表他在過去幫忙轉發過越 多訊息。節點的信譽是交由BS node 計算，為了避免節點偽造自身訊息，偽裝成良好 的節點，所以用來計算RV 值的資料是由節點的鄰居節點提供。這樣可以保證RV 值 的正確性，多個資料來源也可以保證資料的正確性，避免偽造的可能。信譽系統還有 以下幾個特點。 1. 節點使用watchdog 偵測到周圍節點的傳輸活動。 2. 每個節點都有一張叫做Near Node List(NNL)的表，用於紀錄周圍節點的訊息，並 定期偵測和更新周圍節點的資料。 資料包括： (1) 節點編號 (2) 節點 RV (3) 節點 CV 應用於混合式無線網路之信用檢索系統 3. 每個節點都使用watchdog 來記錄周圍節點的 1. Requested (R) counter 2. Forwarded (F) counter 4. RV 值計算公式如下 RV(𝑗) = ∑ 𝑙𝑜𝑔2𝐹𝑖(𝑗) 𝑙𝑜𝑔2𝑅𝑖(𝑗) × 𝑅𝑉𝑡𝑎𝑏𝑙𝑒 𝑛 𝑖=1 (𝑖) 𝑛 , if 𝑅𝑉𝑡𝑎𝑏𝑙𝑒(𝑖) ≥0.8, 𝑖≠𝑗 (1) 參數 定義 𝐹𝑖(𝑗) 節點i watchdog 中紀錄的節點j 的Forwarded 數量 𝑅𝑖(𝑗) 節點i watchdog 中紀錄的節點j 的Requested 數量 𝑅𝑉𝑡𝑎𝑏𝑙𝑒 節點i 的RV 值 𝑅𝑉 介於0~1 之間 表格 3 RV 計算公式參數定義 資料來源：由本研究整理 由於計算RV 的資料是由節點的鄰居節點提供，為了確保可信度，會將資料乘 上提供資料節點的RV。但這樣會產生網路中整體節點RV 慢慢下降的情況發生，因 為網路中較低RV 的節點會占多數，低RV 代表檢索次數比較多，這類節點會導致 計算出來的結果也會不斷下降。例如當現在有一節點N 附近有3 個鄰居。RV 分別 是0.5、0.4、0.3。節點N 的轉傳/檢索資料比為1，RV=(0.5*1+0.4*1+0.3*1)/3=0.4。 現在節點N 又多轉傳幾次資料比變為1.1，但鄰居節點因發送檢索訊息而有所下 降，變為0.5、0.3、0.2，因此RV =(0.5*1.1+0.3*1.1+0.2*1.1)/0.367，可以看到節點 N 明明有轉傳行為，但RV 卻是下降的情形，為了避免這種情況發生，我們只將表 應用於混合式無線網路之信用檢索系統 現良好，也就是轉傳次數比較多的節點所提供的資料列入參考。 5. 為了避免有封包遺失或沒有偵測到導致RV 的計算結果不準確，所以做以下修 正 𝑅𝑉𝑓𝑖𝑛𝑎𝑙(𝑁) = 𝛼𝑅𝑉𝑡𝑎𝑏𝑙𝑒(𝑁) + (1 −𝛼)𝑅𝑉(𝑁) (2) 6. 為了減少需要傳送至目的地的hop 數，會將轉傳節點與目標節點的距離列入參 考，因此選擇轉傳節點的標準為 𝑅𝑉(𝑖) + (1 −𝑑𝑖𝑠𝑡(𝑖) 𝑑𝑖𝑠𝑡𝑟𝑒𝑔 ) (3)  𝑅𝑉(𝑖)：節點i 的RV  𝑑𝑖𝑠𝑡(𝑖)：節點i 與目標節點的距離  𝑑𝑖𝑠𝑡𝑟𝑒𝑔：請求節點與目標節點的距離 下列是信譽計算步驟 假設要計算出節點N 的RV 值 1. BS 蒐集節點N 的鄰近節點中watchdog 資料，資料由鄰近節點主動傳送。 2. 根據鄰近節點紀錄的節點N 的傳輸歷史以及鄰近節點的可信度計算出一個 local value 3. 將所有鄰近節點的local value 相加並除與個數即為節點N 的RV 值。 以上動作每隔一段時間會對所有節點進行一次。 下列是信譽系統運作過程的例子如圖九所示 1. 假如現在有一節點N 要轉傳訊息給節點A，節點N 會先去檢查他的 應用於混合式無線網路之信用檢索系統 NNL，尋找節點A 的RV 值。 2. 如果節點N 沒有節點A 的訊息，節點N 則向BS 請求訊息。 3. 為了計算節點A 的RV 值，BS 會先透過節點A 的周圍節點蒐集節點A 的 傳輸歷史。 4. BS 計算節點A 的RV 值 5. BS 將節點A 的RV 值至節點N，並記錄在節點N 的NNL 中。 6. 節點N 根據節點A 的RV 值決定是否轉傳給節點A。之後NNL 中的資料 每隔一段時間更新一次，由節點N 向BS 請求資料。 圖 九 信譽系統運作例子 資料來源：本研究整理
