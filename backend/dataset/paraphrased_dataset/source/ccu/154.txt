圖 八 請求傳輸檔案 資料來源：本研究整理 以下為傳輸請求檔案的步驟如圖八所示 1. Requesting node 會先產生要搜尋的關鍵字和requesting node 的編號。並使用 LSH(locality sensitive hashing)決定查詢訊息應該傳送至哪個區域。 2. Requesting node 透過聲譽系統(reputation algorithm)和信用系統(credit algorithm)選 出可靠的節點來協助轉發封包至該區域，若區域內沒有合適的可靠節點 forwarding node 則向區域的BS 請求其他區域節點的資訊，並由BS 自其他區域 BS 取得相關節點資訊然後回傳給forwarding node。 3. 該區域第一個接收到查詢訊息的節點會成為relay node 並將此訊息進行轉發。 relay node 會先算出該有r 個節點會收到此查詢訊息，且 r = 2 √𝑣𝑖𝑒𝑤 (view 為 該範圍中的所有節點個數)。然後決定forwarding fanouts a 和forwarding level l。 a 是每次轉發該轉發給幾個節點。l 是該轉發幾次，且r ≤1 + a + 𝑎2 … … + 𝑎𝑙，假 設此區域中有100 個節點，那就代表說需要分送metadata 給2 √100 = 20個節 點。 應用於混合式無線網路之信用檢索系統 4. 收到此查詢訊息的節點會和自己持有的metadata 做比對，有符合的會回 傳”match”，不符合的回傳”NM”給relay node。 5. 最後relay node 將結果回傳至requesting node，若有match 則回傳source node 的 編號。若皆沒有match 就不進行回傳。若relay node 回傳時發現requesting node 不在原來區域，會向BS 請求requesting node 所處區域並進行轉傳。若BS 也沒 有此資訊，relay node 丟棄回傳訊息。 6. 接收到relay node 的回傳訊息後，requesting node 會傳送請求訊息至source node 請求檔案。 7. Source node 接收到訊息後回傳檔案給requesting node。
