基因演算法（Genetic Algorithm, GA）被廣泛地應用在樣本選取的領域上， 過去已有文獻探討基因演算法在不同樣本選取問題上的使用[26] [27]，並且也有 文獻[28]證實，基因演算法在大型的搜尋問題中，能夠比其他演算法來得更有效 率、更容易解決問題。亦有研究[29]在做破產預測（Bankruptcy Prediction）的分 析時，使用基因演算法來進行資料前處理，讓後續的預測分析結果更加準確。 基因演算法的核心目的為找出問題的最佳解決辦法[30]，其演算法的運作概 念源自於達爾文的物競天擇理論。達爾文的物競天擇理論，最廣為人知的一句話 為「適者生存，不適者淘汰」，經過環境的淬鍊所存活下來的物種，代表它的本 身條件能夠經得起環境的考驗而生存，而它的基因也會被保留而遺傳，並隨著環 境的變動不停地進行演化。 基因演算法中的基本單位稱為染色體（Chromosomes），如下圖2-3 所示，染 色體通常以0 和1 的二位元形式來呈現，並代表欲解決問題的可行解。染色體由 許多基因所組成，基因指的是可行解中的參數，或者是候選可行解的集合。 圖2-3 以二位元形態呈現之染色體[31] 將基因組合成染色體的過程稱為編碼（Encoding），常見的編碼方式有二進 位制編碼、互換編碼與樹形編碼，其中，二進位制編碼為最常見也最簡單的編碼 方式[32]。染色體在競爭是否能生存的過程中，會經過選擇（Selection）、交配 （Crossover）與突變（Mutation）三個過程，透過這三個過程，可以留下在競爭 中存活下來的優良染色體，並且經過一連串的交配與突變的演算過程，成為一個 新的染色體族群，經過世代的演化後，優良的染色體即被保留下來。基因演算法 會以適應性函數（Fitness Function）來評估這些可行解的適合程度，適應函數會 計算出適應值（Fitness Value），適應值代表這個可行解是最佳解決辦法的程度， 而在經過世代的競爭演化，表現不佳的染色體會被環境淘汰，因此存活下來的染 色體，即可以符合演算法中的適應性函數，並且獲得較佳的適應值，代表此染色 體為我們欲解決問題的最佳可行解。 圖2-4 為基因演算法流程的虛擬碼，由下圖的流程可以得知一開始會隨機產 生出族群，在這個族群中，含有P 種染色體集合。其中，個體i 所含有的染色體 為P 的子集合，基因演算法會針對每個個體i 做適應性函數的計算，算出適應值 以供後面做判斷的依據。接下來基因演算法會隨機挑選兩個個體：ia 與ib 做為 母體（Parents），以這兩個母體隨機進行交配或突變其中一種動作，並產生後代 ic（Offspring）。這些後代會再進行適應性函數的計算，並且將算出來的值與母體 作比較，若是後代算出來的適應值較母體還要佳，表現較差的個體將會被繁衍出 來的後代ic 給取代，並且再進行下一次的演化動作，直到終止條件產生後結束 演算法流程。 圖2-4 基因演算法流程[33] 由上述的基因演算法流程可以看出，基因演算法的主要機制有適應性函數計 算、突變、交配與選擇四個部分，這四個部分可以說是基因演算法的核心，在以 下將會對這四個機制分別做介紹： (1) 適應性函數（Fitness Function） 基因演算法運作的過程中，每個待解決的問題都會設計一套適應性函數， 這套適應性函數為衡量染色體的適應值，一般而言，適應值越高就代表此染色體 為本問題的最佳解的程度越高。適應性函數是由人為設計的，對應不同的問題， 會有不同的適應性函數算法[34]，並根據其算出的值，再去做優劣程度的排序， 例如：旅行推銷員問題（Travelling Salesman Problem）為求取路線中最短路徑的 問題，因此旅行推銷員問題中的適應性函數，等於所求得距離的函數；而工作排 程問題（Job Schedule Problem）中的適應性函數，則等於花費的時間函數。在基 因演算法中，判斷此可行解是否為本問題的最佳解，或是母體與後代的染色體間 進行比較，皆使用適應性函數作為衡量，由此可見，適應性函數是基因演算法過 程中不可或缺的比較指標。 (2) 選擇（Selection） 不論是在突變或是交配的階段，皆需要選擇一對染色體當作母體以繁衍後代， 選擇的目的在於挑選出母體，讓母體複製（Reproduction）本身的特徵，並使母 體能夠將自己的特徵保留給後代的染色體。整體而言，複製機會的高低取決於該 染色體的適應性高低，較高的染色體會有較高的複製機會。在選擇的機制中，包 含了下列兩個步驟，分別為選擇概率計算（Selection Probability Calculation）與取 樣演算法（Sampling Algorithm），以下分別為這兩個步驟做介紹： ◆ 選擇概率計算（Selection Probability Calculation） 選擇概率意即計算該染色體被挑選的程度高低，選擇概率越高，代表該染 色體被挑選的可能性最高。一般基因演算法的應用而言，多數採用的方法為比 例選擇法（Proportional Selection），比例選擇法的計算公式如以下公式2.1： 𝑃s(𝐶𝑖) = 𝑓(𝐶𝑖) ∑ 𝑓(𝐶𝑖) 𝑁 𝑖=1 (2.1) 上面2.1 公式中的Ps 代表染色體Ci 被選擇的機率，而𝑓為前面介紹過的 適應函數，由此公式可以看出，若是適應函數越高的染色體，將會得到較高的 選擇與複製機會。  取樣演算法（Sampling Algorithm） 在進行完選取概率的計算後，接著會進行決定取樣比例的計算，取樣的 多寡決定了母體需要複製多少以供子代進行組合。常見的取樣方法有三種， 分別為： （1）混合取樣（Mixed Sampling） 、 （2）隨機取樣（Random Sampling） 與（3）確定性取樣（Deterministic Sampling）。這三種取樣方法中，以隨機取 樣法較為知名，並且也有文獻[35]經過實驗證實，隨機取樣法中的輪盤法則 （Roulette Wheel）的效率，相較於其他取樣演算法是表現較佳的。 (3) 突變（Mutation） 在基因演算法的過程中，突變扮演著提供基因修改機制的角色，被挑選 中的染色體，都會有機率出現突變，突變的機率取決於演算法中事先定義的 突變率𝑃𝑚。突變的過程會將新的基因特徵放入族群中，讓族群演化的過程 中產生新的遺傳架構、擴大後代遺傳的多樣性，並使族群在結構變異性上有 所增加。突變可以幫助我們在尋求問題的最佳解決方法時，不會被區域內的 限制給侷限，而將次佳解作為最佳解[36]。 突變的過程會將子代的位元反轉，以圖2-3 為例來解說，假如第二與第 四的位置產生突變時，原本的基因組合10110 會轉變為11100，突變後的染 色體以非原始產生的基因組合，繼續嘗試尋找最佳解，如此突變的機制，可 以有效地幫助基因演算法突破原有的演化限制。 (4) 交配（Crossover） 大自然中的生物在進行演化的過程時，會透過交配來繁衍下一代，交配 是為了讓個體間能夠交換有用的資訊，以期望交配產生的下一代可以組合出 擁有更高生存度的個體，基因演算法承襲了生物交配的概念，將此機制應用 在演算法中，其中常見的交配機制為單點交配（One-Point Crossover）與多點 交配（Multi-Points Crossover），以下為兩種交配機制的簡單介紹：  單點交配（One-Point Crossover） 單點交配運作時，會先隨機決定一個交配點，交配點的作用是設立一個 基準點，讓此基準點之前或之後的基因做互相交換的動作。下圖2-5 為單點 交配的過程，圖中的P1 與P2 分別代表兩個母體，而X 即是隨機產生的交 配點，在交配進行時會以X 為基準，將兩側的基因做互換的動作，而產生 O1 與O2 兩個後代染色體。 圖2-5 單點交配示意圖[37]  多點交配（Multi-Points Crossover） 相對於單點交配，多點交配會任意挑選多個交配點，並交換兩母體中這 些交配點間的基因。下圖2-6 為多點交配的示意圖，由圖中可以看見母體一 （Parent 1）與母體二（Parent 2）隨機取了多個交配點（Crossover Points）， 而這些交配點之間的基因會隨機作交換的動作，而產生擁有不同基因特徵的 子代一（Offspring 1）與子代二（Offspring 2）。 圖2-6 多點交配示意圖[38] 在突變或交配完成之後，會將子代的適應函數與母體的適應函數做比較，假 如子代的適應性較母體還要佳，演算法會選擇將子代的特徵取代母體，意即經過 一衡量基準的比較，將表現最好者留下來，並繼續進行演算法的流程，直至終止 條件產生結束流程。如此將表現較差的染色體取代的策略，稱為菁英保留策略 （Elitist Strategy）。 不論是突變或是交配，其最主要目的皆是要將最優秀的染色體，在經過每一 次的母體的繁衍過程中完整地保留下來，以獲得解決問題的最佳可行解。樣本選 取亦是奉行此核心概念，期望可以透過基因演算法的運作，將可以提升資料探勘 結果的代表性樣本留下，將基因演算法運用在樣本選取上的執行步驟，可以參照 下圖2-7 所描述。 圖2-7 基因演算法觀念運用於樣本選取[39] 在上圖的演算法情境中，T 代表一個訓練資料集，演算法會先判斷訓練資料 集T 中是否含有雜訊，假如其中含有雜訊或冗餘值，即會開始進行基因演算法。 一開始會從N 大小的族群中隨機獲得染色體，並且對每一條染色體做適應性函 數F(𝐶𝑖)的計算，同時採用突變或是交配的方式，複製染色體，並衍生出後代， 直到產生出擁有最佳適應性的染色體，將它加入事先定義好的S 空集合中，如此 不停地重複步驟，直到訓練資料集T 中的樣本都被篩選完，達到終止條件，最後 S 集合中所有的樣本，就是經由基因演算法篩選後所留下來的代表性樣本。
