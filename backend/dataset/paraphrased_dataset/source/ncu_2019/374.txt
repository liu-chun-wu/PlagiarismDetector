本研究使用[33]提出之特徵選取方法，其輸入資料矩陣（Data matrix, DM）包含了 候選特徵池（Candidate feature pool, CP），𝐶𝑃= {𝑓𝑖, 𝑖= 1,2, … , |𝐶𝑃|}，其中，𝑓𝑖為第𝑖個候 選特徵；|𝐶𝑃|為候選特徵個數。以及目標集合（Target set, TS），𝑇𝑆= {𝑡𝑘, 𝑘= 1,2, … , |𝑇𝑆|}， 其中，𝑡𝑘為第𝑘個目標，|𝑇𝑆|為目標個數。資料矩陣如下所示： 𝐷𝑀= [ 𝑥1,1 𝑥2,1 𝑥1,2 𝑥2,2 ⋮ ⋮ 𝑥1,𝑆 𝑥2,𝑆 ⋯ 𝑥|𝐶𝑃|,1 ⋯ 𝑥|𝐶𝑃|,2 ⋯ ⋮ ⋯ 𝑥|𝐶𝑃|,𝑆 𝑦1,1 𝑦2,1 𝑦1,2 𝑦2,1 ⋮ ⋮ 𝑦1,𝑆 𝑦2,𝑆 ⋯ 𝑦|𝑇𝑆|,1 ⋯ 𝑦|𝑇𝑆|,2 ⋯ ⋮ ⋯ 𝑦|𝑇𝑆|,𝑆 ], (9) 其中，𝑗= 1,2, … , 𝑆，𝑆為資料集筆數；𝑥𝑖,𝑗為第𝑖個候選特徵的第𝑗筆資料；𝑦𝑘,𝑗為第k 個目 標的第𝑗筆資料。以下將介紹多目標特徵選取之流程步驟： 步驟一：計算影響資訊矩陣 影響資訊矩陣（Influence information matrix, IIM）是以夏農資訊熵（Shannon information entropy）[34]為基礎，計算互資訊（Mutual information）。透過互資訊，可算 出特徵對特徵、特徵對目標間的影響資訊量，並將結果以矩陣的形式存儲。互資訊的計 算方法為資訊熵減去條件資訊熵，如下式： 𝐻(𝑌) = ∫𝑝𝑑(𝑦)log ( 𝑝𝑑(𝑦))𝑑𝑦, (10) 𝐻(𝑌|𝑋) = ∬𝑝𝑑(𝑦|𝑥)𝑝𝑑(𝑥) log ( 𝑝𝑑(𝑦|𝑥)) 𝑑𝑦𝑑𝑥, (11) 𝐼(𝑋, 𝑌) = 𝐻(𝑌) −𝐻𝑋(𝑌), (12) 其中，𝐻(𝑌)為隨機變數𝑌之資訊熵；𝑝𝑑(𝑦)為機率密度分布下，事件y 發生的機率；𝐻(𝑌|𝑋) 為已知隨機變數𝑋情況下，隨機變數𝑌之條件資訊熵；𝑝𝑑(𝑦|𝑥)為已知事件𝑥發生的條件下， 事件𝑦發生的機率；𝑝𝑑(𝑥)為機率密度分布下，事件𝑥發生的機率。 卷積模糊神經系統於財金市場數據之研究 為獲取更準確的資訊，此方法會再分成兩種條件計算互資訊，分別是在隨機變數𝑋 為正的情況下，與隨機變數𝑌產生之互資訊；在隨機變數𝑋為負的情況下，與隨機變數𝑌 產生之互資訊。隨後，乘上對應的機率密度分布期望值，將兩個結果相加後，可得到影 響資訊，如下式： 𝐼(𝑋+, 𝑌) = 𝐻(𝑌) −𝐻𝑋+(𝑌), (13) 𝐼(𝑋−, 𝑌) = 𝐻(𝑌) −𝐻𝑋−(𝑌), (14) 𝐼𝑋→𝑌= 𝐼(𝑋+, 𝑌) ∫𝑝𝑑(𝑥)𝑑𝑥 ∞ + 𝐼(𝑋−, 𝑌) ∫𝑝𝑑(𝑥)𝑑𝑥 −∞ . (15) 根據目標數，會有|𝑇𝑆|個影響資訊矩陣。影響資訊矩陣之示意圖如下： 𝒇𝟏 𝒇𝟐 ⋯ 𝒇|𝑪𝑷| 𝒕𝒌 𝒇𝟏 𝐼𝑓1→𝑓2 ⋯ 𝐼𝑓1→𝑓|𝐶𝑃| 𝐼𝑓1→𝑡𝑘 𝒇𝟐 𝐼𝑓2→𝑓1 ⋯ 𝐼𝑓2→𝑓|𝐶𝑃| 𝐼𝑓2→𝑡𝑘 ⋮ ⋮ ⋮ ⋱ ⋮ ⋮ 𝒇|𝑪𝑷| 𝐼𝑓|𝐶𝑃|→𝑓1 𝐼𝑓|𝐶𝑃|→𝑓2 ⋯ 𝐼𝑓|𝐶𝑃|→𝑡𝑘 𝒕𝒌 𝐼𝑡𝑘→𝑓1 𝐼𝑡𝑘→𝑓2 ⋯ 𝐼𝑡𝑘→𝑓|𝐶𝑃| 圖 3：影響資訊矩陣之示意圖（第𝑘個目標） 步驟二：計算選取增益 特徵對目標的選取增益（Selection gain）是根據影響資訊進行計算。當選取增益值 為正時，該特徵就會被放入相對目標的選取特徵池（Selected feature pool, SP）。選取增 益計算方法如下式： 𝑔𝑓𝑖→𝑡𝑗= 𝐼𝑓𝑖→𝑡𝑗−𝑅𝑓𝑖−𝑆𝑃(𝑗), (16) 𝑅𝑓𝑖→𝑆𝑃(𝑗) = 2|𝑆𝑃(𝑗)| ∑ {𝐼𝑓𝑖→𝑠𝑛 (𝑗) + 𝐼𝑠𝑛 (𝑗)→𝑓𝑖} |𝑆𝑃(𝑗)| 𝑛=1 , (17) 卷積模糊神經系統於財金市場數據之研究 其中，𝑖= 1,2, … , |𝐶𝑃|；𝑗= 1,2, … , |𝑇𝑆|；𝑔𝑓𝑖→𝑡𝑗為𝑓𝑖對𝑡𝑗的選取增益；𝐼𝑓𝑖→𝑡𝑗為𝑓𝑖對𝑡𝑗的影響 資訊；𝑅𝑓𝑖→𝑆𝑃(𝑗)為𝑓𝑖對第𝑗個選取特徵池的冗餘資訊（Redundant information）；𝑠𝑛 (𝑗)為第𝑗個 選取特徵池的第𝑛個已選取特徵。對於新選取的特徵，冗餘資訊是由已被選進特徵池的 特徵所提供，故將此重複的部分扣除。 步驟三：計算已選取特徵之覆蓋率與總選取增益 經過上一步驟後，每個選取特徵池會有若干個被選取之特徵。然而，這些特徵是對 應單一目標而被選取的。為評估這些特徵對整體目標之貢獻，須計算每個特徵，在所有 選取特徵池的覆蓋率及總選取增益。為方便計算，聯集所有選取特徵池內的特徵，並將 結果放入集合𝛺內，𝛺= {𝜙𝑘, 𝑘= 1,2, … , |𝛺|}，|𝛺|為被選取特徵的總個數。覆蓋率計算方 法如下式： 𝜔(𝜙𝑘) = 𝑛OL(𝜙𝑘) |𝑇𝑆| , (18) 其中，𝜔(𝜙𝑘)為第𝑘個被選取特徵的覆蓋率；𝑛OL(𝜙𝑘)為第𝑘個被選取特徵，在這些選取特 徵池中出現的次數（Number of overlapping）。總選取增益的計算方法如下式： 𝑔sum(𝜙𝑘) = ∑ 𝑔𝑓𝑖→𝑡𝑗 |𝑇𝑆| 𝑗=1 , (19) 其中，𝑔sum(𝜙𝑘)是第𝑘個被選取特徵，對每個目標之選取增益的加總。 步驟四：挑選有效貢獻之特徵 透過上一步驟中的覆蓋率及總選取增益，可計算特徵對整體目標的有效貢獻量，計 算方法如下式： 𝜌(𝜙𝑘) = 𝜔(𝜙𝑘) ∙𝑔sum(𝜙𝑘), (20) 卷積模糊神經系統於財金市場數據之研究 其中，𝜌(𝜙𝑘)為第𝑘個被選取特徵，對整體目標的有效貢獻量。最後，將有效貢獻量大於 零之特徵，由多至少排序後，放入最終選取池（Final selected feature pool, FP）內，作為 多目標特徵選取的最終結果，𝐹𝑃= {𝑠𝑓𝑘, 𝑘= 1,2, … , |𝐹𝑃|}，共有|𝐹𝑃|個特徵。
