為探討卷積層於模型中的效用，本研究之CNN 架構皆以卷積層為主，並在最後加 入一層線性輸出的全連接層。卷積是透過滑動視窗（Sliding window）的方式，使用卷積 核（Kernel map）將輸入矩陣（Input matrix）進行卷積運算。隨後，再將卷積運算後的 結果代入激勵函數後得到輸出，該輸出稱為特徵圖（Feature map），會傳到下一層作為輸 入矩陣。卷積層的運作方式如式(21)，其中，𝑤為卷積核參數；𝑥為輸入值；a為輸出值： 𝑓(∙)為激勵函數。全連接層則是接收前一層所有神經元的輸出矩陣，並將其做平坦化 （Flattening）。 a𝑖,𝑗= 𝑓(∑∑𝑤𝑚,𝑛𝑥𝑖+𝑚−1,𝑗+𝑛−1 𝑁 𝑛=1 𝑀 𝑚=1 ). (21) 本研究之CNN 架構設定如表 1 所示，描述各層之型態、激勵函數型態、神經元個 數及卷積核大小。在卷積層中，卷積核在輸入矩陣之移動視窗步伐（Stride）設定為1； 激勵函數皆為雙曲正切函數tanh，其輸出區間介於[−1,1]，對於漲跌值之資料較為合適， 計算公式如下，其中，𝑧為卷積運算後得到的數值： tanh(𝑧𝑖,𝑗) = 1 + 𝑒−2𝑧𝑖,𝑗−1. (22) 卷積模糊神經系統於財金市場數據之研究 表 1 本研究之CNN 架構設定 Layer Layer type Unit type # of unit Kernel map size Input C1 Convolutional tanh 2 × 2 C2 Convolutional tanh 2 × 2 C3 Convolutional tanh 2 × 2 FC Fully Connected Linear Output 然而，在執行多目標特徵選取後，會得到|𝐹𝑃|個具影響力之特徵，須進行處理才能 符合本研究之CNN 架構的輸入格式。處理方法如下，取一整數𝑁作為從最終選取池輸 入進CNN 架構之特徵個數，其中，𝑁為某一整數的平方值且小於等於|𝐹𝑃|。隨後，將得 到的特徵向量進行重構（Reshape）轉化為方陣並作為模型輸入，如下所示： [𝑠𝑓1, 𝑠𝑓2, … , 𝑠𝑓𝑁] ⟹[ 𝑠𝑓1 ⋯ ⋯ ⋮ ⋱ ⋮ ⋯ ⋯ 𝑠𝑓𝑁 ]. (23)
