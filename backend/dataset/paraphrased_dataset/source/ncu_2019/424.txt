實驗一目的為使用Pure Neural Network Model 由失效偵測與分類系統(FDC)於產品 生產當下所產出的所有機台相關參數報值預測下一站的產品量測參數，並藉由調整五種 資料空值回補方法(Median, Zero, Max, Min, Mean)與去Low Varience 欄位和去除極端值 資料的組合，找出適合的補值方法與資料處理方式。表4-2 為Pure Neural Network 的參 數設定與Loss, Optimizer, Metrics 等方法。 表4-2 Pure Neural Network 設定 rn Neural Count Activation 1,000 relu 1,000 elu relu 1,000 elu elu elu elu elu elu Loss = ‘mae’ metrics=['mse', 'mae', 'mape'] optimizer='Adam' epochs=200 batch_size=20000 圖4-6 為Pure NN 在輸入資料去除極端值但未去除Low Variance 欄位的狀況下，於 五種遺失值處理後預測數值與目標的差距(Y 軸為與實際值相差的比例，如實際值100 預測值102 則Y 軸為0.02，X 軸為每一個資料點(Data Point))，圖形順序由左至右由上 至下分別為Median, Zero, Max, Min, Mean 等五種不同處理方式。 圖4-6 Pure NN 預測結果(去極端值) (圖片來源：本研究整理) 從圖4-6 可以發現在去極端值而未去除low variance 欄位的狀況下，以Zero 填 補遺失值的預測結果較為平穩，以Median 處理的結果最差，而從表4-3 的每點平均來 看，在Test 資料中Mean 的誤差最小，Median 的誤差最大，因此可以推論在未去除low variance 欄位的狀況下，以Mean 方法填補空值會使Pure NN 的預測結果較佳，而以 Median 則較其它方法會使Pure NN 的預測結果較差。 表4-3 Pure NN 補值方法比較表(去極端值) Median Zero Test Train Test Train 0.05310 0.04291 0.04909 0.04468 Max Min Test Train Test Train 0.04939 0.04707 0.05272 0.04946 Mean Test Train 0.04668 0.03279 圖4-7 為訓練資料去除low Variance 但未去除極端值在Pure NN 的預測結果上 的各個補值方法上各點誤差的長條圖，可與圖4-6 比較發現未去除極端值會使預測結果 在某些特定的資料點產生非常大的預測差距，而以圖4-7 的各項填補方法的預測值差距 比較我認為Max 的誤差範圍較小而Mean 的誤差範圍較大。 圖4-7 Pure NN 預測結果(去low variance) (圖片來源：本研究整理) 表4-4 為訓練資料去除low variance 未去除極端值後建立的Pure NN 在預測上與目 標比較平均誤差，以平均的角度出發，可以發現在訓練資料未去除極端值的狀況下，使 用Zero 補值會使模型的預測誤差較小，而使用Mean 補值的預測誤差較大，以平均的 誤差而言相較表4-3，在Pure NN 的預測值精準度上，去除極端值較去除low variance 更能使預測結果誤差較小。 表4-4 Pure NN 補值方法比較表(去low variance) Median Zero Test Train Test Train 0.07823 0.07257 0.07034 0.06393 Max Min Test Train Test Train 0.07157 0.06333 0.06063 0.05676 Mean Test Train 0.12749 0.12933 圖4-8 為Pure NN 在訓練資料同時去除low variance 和極端值後在預測結果與目標 差異上每點的誤差長條圖，與圖4-6、圖4-7 相比，可觀察到—同時去除low variance 和極端值在預測結果上的誤差較小，而在圖4-8 中的各項補值結果中，以Median 補值 的結果誤差範圍較小而以Min 補值的誤差範圍較大。 圖4-8 Pure NN 預測結果(去low variance/極端值) (圖片來源：本研究整理) 表4-5 為Pure NN 在訓練資料同時去除low variance 和極端值後(去除後約1100 維， 1500 筆資料)在各項補值方法下預測結果與目標的平均誤差，觀察表中可發現，雖然各 項Test 數值並沒有表4-3 中以Mean 補值未去除low variance 的接近目標(差異僅0.001)， 但在Train 資料的預測平均誤差大幅下降(以Median 補值差距約0.03)，而在表4-5 的各 項補值方法差距的比較中，以Test 和Train 的綜合誤差相比，以Median 補值誤差較小， 而以Mean 補值相較其它補值方法誤差最大。 表4-5 Pure NN 補值方法比較表(去low variance/極端值) Median Zero Test Train Test Train 0.04761 0.01764 0.04858 0.03620 Max Min Test Train Test Train 0.04720 0.03647 0.04976 0.03837 Mean Test Train 0.05012 0.03395 綜合實驗一在三種資料處理的狀況下比較五種遺失值處理方法可得到以下結論： 1. 同時去low variance/極端值與只去除去中一項相比更能使Pure NN 預測結果接 近目標值。 2. 去除極端值較去除low variance 對Pure NN 的預測結果影響更大。 3. 在各項的比較當中，以Median 補值且去除low variance/極端值相對使Pure NN 預測結果最接近目標值。
